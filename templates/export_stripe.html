{% extends "layout.html" %}

{% block title %}.fylr | Tax Form Export{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row mb-5">
        <div class="col-lg-8 mx-auto text-center">
            <h1 class="mb-3">Export Your Tax Documents</h1>
            <p class="lead text-muted">Choose your preferred format and options below.</p>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-9 mx-auto">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-md-7 pe-md-4 mb-4 mb-md-0">
                            <h4 class="mb-4">Available Documents</h4>
                            
                            <div class="form-check mb-3 p-3 border rounded">
                                <input class="form-check-input" type="checkbox" id="doc1" checked>
                                <label class="form-check-label d-flex justify-content-between w-100" for="doc1">
                                    <div>
                                        <strong>Schedule C (Form 1040)</strong>
                                        <div class="text-muted small">Profit or Loss From Business</div>
                                    </div>
                                    <span class="badge bg-success">Ready</span>
                                </label>
                            </div>
                            
                            <div class="form-check mb-3 p-3 border rounded">
                                <input class="form-check-input" type="checkbox" id="doc2" checked>
                                <label class="form-check-label d-flex justify-content-between w-100" for="doc2">
                                    <div>
                                        <strong>Schedule SE (Form 1040)</strong>
                                        <div class="text-muted small">Self-Employment Tax</div>
                                    </div>
                                    <span class="badge bg-success">Ready</span>
                                </label>
                            </div>
                            
                            <div class="form-check mb-3 p-3 border rounded">
                                <input class="form-check-input" type="checkbox" id="doc3" checked>
                                <label class="form-check-label d-flex justify-content-between w-100" for="doc3">
                                    <div>
                                        <strong>Form 4562</strong>
                                        <div class="text-muted small">Depreciation and Amortization</div>
                                    </div>
                                    <span class="badge bg-success">Ready</span>
                                </label>
                            </div>
                            
                            <div class="form-check mb-3 p-3 border rounded">
                                <input class="form-check-input" type="checkbox" id="doc4">
                                <label class="form-check-label d-flex justify-content-between w-100" for="doc4">
                                    <div>
                                        <strong>Form 8829</strong>
                                        <div class="text-muted small">Expenses for Business Use of Your Home</div>
                                    </div>
                                    <span class="badge bg-warning text-dark">Incomplete</span>
                                </label>
                            </div>
                            
                            <div class="form-check mb-3 p-3 border rounded">
                                <input class="form-check-input" type="checkbox" id="doc5" checked>
                                <label class="form-check-label d-flex justify-content-between w-100" for="doc5">
                                    <div>
                                        <strong>Tax Strategy Report</strong>
                                        <div class="text-muted small">AI-generated tax saving recommendations</div>
                                    </div>
                                    <span class="badge bg-success">Ready</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="col-md-5 ps-md-4 border-start">
                            <h4 class="mb-4">Export Options</h4>
                            
                            <div class="mb-4">
                                <label class="form-label">Export Format</label>
                                <div class="d-flex flex-column gap-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="exportFormat" id="formatPdf" checked>
                                        <label class="form-check-label" for="formatPdf">
                                            <i class="fas fa-file-pdf me-2 text-danger"></i> PDF Format
                                        </label>
                                        <div class="text-muted small ms-4">Standard printable format</div>
                                    </div>
                                    
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="exportFormat" id="formatJson">
                                        <label class="form-check-label" for="formatJson">
                                            <i class="fas fa-file-code me-2 text-primary"></i> JSON Data
                                        </label>
                                        <div class="text-muted small ms-4">For importing to other systems</div>
                                    </div>
                                    
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="exportFormat" id="formatHtml">
                                        <label class="form-check-label" for="formatHtml">
                                            <i class="fas fa-file-alt me-2 text-success"></i> HTML Format
                                        </label>
                                        <div class="text-muted small ms-4">For sharing via email</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Additional Options</label>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="includeInstructions" checked>
                                    <label class="form-check-label" for="includeInstructions">Include filing instructions</label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="includeWorksheets" checked>
                                    <label class="form-check-label" for="includeWorksheets">Include supporting worksheets</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="includeAiNotes">
                                    <label class="form-check-label" for="includeAiNotes">Include AI explanatory notes</label>
                                </div>
                            </div>
                            
                            <hr class="my-4">
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h5 class="mb-0">Total</h5>
                                    <h5 class="mb-0 fw-bold">$0.00</h5>
                                </div>
                                <div class="text-success small">
                                    <i class="fas fa-check-circle me-1"></i> Included with your plan
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2">
                                <button id="export-button" class="btn btn-primary" style="background-color: #FF6B00; border-color: #FF6B00;">
                                    <i class="fas fa-download me-2"></i> Export Now
                                </button>
                                <a href="{{ url_for('main.dashboard') }}" class="btn btn-outline-secondary">
                                    <i class="fas fa-arrow-left me-2"></i> Back to Dashboard
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="alert alert-warning mt-4 d-flex">
                <div class="me-3">
                    <i class="fas fa-exclamation-triangle fa-2x"></i>
                </div>
                <div>
                    <h5 class="alert-heading">Important Notice</h5>
                    <p class="mb-0">You are responsible for verifying all information in exported documents before filing with tax authorities. .fylr provides AI-assisted document preparation but does not include human review of your documents.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Handle export button click
        document.getElementById('export-button').addEventListener('click', function() {
            // Show loading state
            this.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> Processing...';
            this.disabled = true;
            
            // Simulate processing delay
            setTimeout(function() {
                // Show success message
                const exportButton = document.getElementById('export-button');
                exportButton.innerHTML = '<i class="fas fa-check me-2"></i> Documents Ready';
                exportButton.classList.remove('btn-primary');
                exportButton.classList.add('btn-success');
                
                // Show download popup
                setTimeout(function() {
                    alert('Your tax documents have been successfully prepared for export. The download will begin automatically.');
                    
                    // Reset button after download
                    setTimeout(function() {
                        exportButton.innerHTML = '<i class="fas fa-download me-2"></i> Export Again';
                        exportButton.classList.remove('btn-success');
                        exportButton.classList.add('btn-primary');
                        exportButton.disabled = false;
                    }, 3000);
                }, 500);
            }, 2000);
        });
    });
</script>
{% endblock %}